# MCCE ç¯å¢ƒé…ç½®æ–‡ä»¶æ€»ç»“

## ğŸ“ åˆ›å»ºçš„æ–‡ä»¶

### 1. **requirements_moorl.txt** - moorlç¯å¢ƒä¾èµ–
ä¸»ä¼˜åŒ–ç¯å¢ƒï¼Œè¿è¡ŒMCCEç®—æ³•

**æ ¸å¿ƒåŒ…**:
- PyTorch + Transformersï¼ˆæ¨¡å‹æ¨ç†ï¼‰
- pymoo + pygmoï¼ˆå¤šç›®æ ‡ä¼˜åŒ–ï¼‰
- OpenAI + Google Generative AIï¼ˆLLM APIï¼‰
- NumPy + Pandas + SciPyï¼ˆç§‘å­¦è®¡ç®—ï¼‰

**ç”¨é€”**: 
```bash
conda create -n moorl python=3.10
conda activate moorl
pip install -r requirements_moorl.txt
```

### 2. **requirements_verl.txt** - verlç¯å¢ƒä¾èµ–
DPOè®­ç»ƒä¸“ç”¨ç¯å¢ƒ

**æ ¸å¿ƒåŒ…**:
- TRLï¼ˆDPOè®­ç»ƒæ ¸å¿ƒï¼‰
- SwanLabï¼ˆå®éªŒè¿½è¸ªï¼‰
- Flash Attentionï¼ˆåŠ é€Ÿæ¨ç†ï¼‰
- PEFTï¼ˆå‚æ•°é«˜æ•ˆå¾®è°ƒï¼‰

**ç”¨é€”**:
```bash
conda create -n verl python=3.10
conda activate verl
pip install -r requirements_verl.txt
```

### 3. **requirements.txt** - åŸºç¡€ä¾èµ–ï¼ˆå·²æ›´æ–°ï¼‰
æœ€å°ä¾èµ–é›†åˆï¼Œç”¨äºå¿«é€Ÿäº†è§£é¡¹ç›®éœ€æ±‚

**å†…å®¹**: æ ¸å¿ƒçš„ç§‘å­¦è®¡ç®—å’Œä¼˜åŒ–åº“

### 4. **ç¯å¢ƒé…ç½®è¯´æ˜.md** - å®Œæ•´é…ç½®æŒ‡å—
è¯¦ç»†çš„å®‰è£…ã€éªŒè¯ã€æ•…éšœæ’é™¤æ–‡æ¡£

**åŒ…å«å†…å®¹**:
- ä¸¤ä¸ªç¯å¢ƒçš„è¯¦ç»†è¯´æ˜
- åˆ†æ­¥å®‰è£…æŒ‡å—
- éªŒè¯æ–¹æ³•
- å¸¸è§é—®é¢˜è§£ç­”
- ç¯å¢ƒå¯¼å‡ºå’Œè¿ç§»

### 5. **ç¯å¢ƒå®‰è£…å¿«é€ŸæŒ‡å—.txt** - å¿«é€Ÿå‚è€ƒ
ä¸€é¡µçº¸çš„å¿«é€Ÿå®‰è£…å‘½ä»¤é›†åˆ

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: æ–°ç”¨æˆ·é¦–æ¬¡å®‰è£…
1. é˜…è¯» `ç¯å¢ƒå®‰è£…å¿«é€ŸæŒ‡å—.txt`
2. æŒ‰ç…§æ­¥éª¤åˆ›å»ºä¸¤ä¸ªç¯å¢ƒ
3. å‚è€ƒ `ç¯å¢ƒé…ç½®è¯´æ˜.md` è§£å†³é—®é¢˜

### åœºæ™¯2: åœ¨æ–°æœºå™¨ä¸Šéƒ¨ç½²
1. å¤åˆ¶ `requirements_moorl.txt` å’Œ `requirements_verl.txt`
2. åˆ›å»ºç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
3. ä¸‹è½½æ¨¡å‹ï¼Œé…ç½®è·¯å¾„

### åœºæ™¯3: æ›´æ–°ä¾èµ–
```bash
conda activate moorl
pip install -r requirements_moorl.txt --upgrade

conda activate verl
pip install -r requirements_verl.txt --upgrade
```

### åœºæ™¯4: ç¯å¢ƒè¿ç§»
```bash
# åœ¨åŸæœºå™¨å¯¼å‡º
conda activate moorl
conda env export > environment_moorl.yml

# åœ¨æ–°æœºå™¨å¯¼å…¥
conda env create -f environment_moorl.yml
```

## ğŸ“Š ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | moorlç¯å¢ƒ | verlç¯å¢ƒ |
|------|----------|---------|
| **ä¸»è¦ç”¨é€”** | ä¼˜åŒ–ç®—æ³•æ‰§è¡Œ | DPOæ¨¡å‹è®­ç»ƒ |
| **Pythonç‰ˆæœ¬** | 3.10 | 3.10 |
| **æ ¸å¿ƒåº“** | pymoo, pygmo | trl, peft |
| **GPUéœ€æ±‚** | å¯é€‰ | å¼ºçƒˆæ¨è |
| **ç£ç›˜ç©ºé—´** | ~5-8 GB | ~8-12 GB |
| **è¿è¡Œé¢‘ç‡** | æŒç»­è¿è¡Œ | å‘¨æœŸæ€§è§¦å‘ |
| **å…³é”®åŒ…æ•°** | ~100 | ~80 |

## ğŸ”§ ç»´æŠ¤å»ºè®®

### å®šæœŸæ›´æ–°
```bash
# æ¯æœˆæ£€æŸ¥ä¸€æ¬¡æ›´æ–°
conda activate moorl
pip list --outdated

conda activate verl
pip list --outdated
```

### ç¯å¢ƒå¤‡ä»½
```bash
# å¤‡ä»½ç¯å¢ƒé…ç½®ï¼ˆå»ºè®®æ¯æ¬¡å¤§æ›´æ–°åï¼‰
conda activate moorl
conda env export > backup/environment_moorl_$(date +%Y%m%d).yml

conda activate verl
conda env export > backup/environment_verl_$(date +%Y%m%d).yml
```

### ä¾èµ–é”å®š
```bash
# å¯¼å‡ºç²¾ç¡®ç‰ˆæœ¬ï¼ˆç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰
conda activate moorl
pip freeze > requirements_moorl_locked.txt

conda activate verl
pip freeze > requirements_verl_locked.txt
```

## âš ï¸ é‡è¦æç¤º

1. **ä¸¤ä¸ªç¯å¢ƒä¸å¯äº’æ¢**
   - moorlè¿è¡Œä¸»ç¨‹åº
   - verlä»…ç”¨äºDPOè®­ç»ƒ
   - ä¸è¦å°è¯•åˆå¹¶ç¯å¢ƒ

2. **ç‰ˆæœ¬å…¼å®¹æ€§**
   - PyTorchç‰ˆæœ¬éœ€è¦ä¸CUDAç‰ˆæœ¬åŒ¹é…
   - Flash Attentionéœ€è¦ç‰¹å®šçš„CUDAç¯å¢ƒ
   - æŸäº›åŒ…å¯èƒ½æœ‰å¹³å°ç‰¹å®šçš„ä¾èµ–

3. **GPUè¦æ±‚**
   - moorl: CPUå¯è¿è¡Œï¼ŒGPUæ¨è
   - verl: å¼ºçƒˆå»ºè®®ä½¿ç”¨GPUï¼ˆè‡³å°‘24GBæ˜¾å­˜ï¼‰

4. **ç£ç›˜ç©ºé—´**
   - é¢„ç•™è‡³å°‘30GBç©ºé—´
   - åŒ…å«ç¯å¢ƒã€æ¨¡å‹ã€æ•°æ®

## ğŸ“ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# åˆ›å»ºmoorlç¯å¢ƒ
conda create -n moorl python=3.10 && conda activate moorl && pip install -r requirements_moorl.txt

# åˆ›å»ºverlç¯å¢ƒ
conda create -n verl python=3.10 && conda activate verl && pip install -r requirements_verl.txt

# éªŒè¯moorl
conda activate moorl && python -c "from algorithm.MOO import MOO; print('âœ“')"

# éªŒè¯verl
conda activate verl && python -c "import trl; import swanlab; print('âœ“')"

# è¿è¡ŒMCCE
conda activate moorl && python main.py problem/molecules/config.yaml
```

## ğŸ”— ç›¸å…³èµ„æº

- **å®Œæ•´æ–‡æ¡£**: `ç¯å¢ƒé…ç½®è¯´æ˜.md`
- **å¿«é€ŸæŒ‡å—**: `ç¯å¢ƒå®‰è£…å¿«é€ŸæŒ‡å—.txt`
- **moorlä¾èµ–**: `requirements_moorl.txt`
- **verlä¾èµ–**: `requirements_verl.txt`
- **åŸºç¡€ä¾èµ–**: `requirements.txt`

---

**åˆ›å»ºæ—¶é—´**: 2025-11-20  
**æ–‡ä»¶ç”¨é€”**: ç¯å¢ƒé…ç½®æ€»ç»“å’Œå¿«é€Ÿå‚è€ƒ

